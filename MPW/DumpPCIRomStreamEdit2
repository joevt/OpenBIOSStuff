¥ Set _s '                                                                                ' # lots of spaces#!/[])]°/ Next#convert indent tabs to spaces/¥([¶t]+)¨1(Å)¨2/ Set indent ¨1; set theLine ¨2; Change indent; Replace /[¶t]/ '    ' -c °; Change . theLine#/¥(?Ç0,79È)¨1 ('('[Â¶)]*')'(' [0x'[0-9A-F]Ç3È']')*)¨2°/ Set theLine ¨1; Set theComment ¨2; Change ¨1'                                                                                '; /¥(?Ç80È)¨1/ Change ¨1; /¥(Å[Â ])¨1([ ]+)¨2°/ Change ¨2; Replace /    / "¶t" -c °; Replace /[ ]+/ "¶t"; Change theLine . '\\ ' theComment#/¥(?Ç0,79È)¨1 (('('[Â¶)]*') ')+('[0x'[0-9A-F]Ç3È'] ')*)¨2°/ || /¥(?Ç0,79È)¨1 (('[0x'[0-9A-F]Ç3È'] ')+)¨2°/ Set theLine ¨1; Set theComment ¨2; Change ¨1'                                                                                '; Replace /¥(?Ç80È)¨1Å/ ¨1; Replace /¥Å[Â ]([ ]+)¨2°/ ¨2; Replace /    / "¶t" -c °; Replace /[ ]+/ "¶t"; Change theLine . '\\ ' theComment# protect slash definition/'\ \'/ Replace /'\ \'/ ' \\' -c °# divide the line into the line part, comment part and instruction part./[Â\\]('\'[Â["]*)¨2([]()[\\ 0-9a-fx-]*)¨3°/ Set _c ¨2; Set _i ¨3; Replace /¶\[Â["]*[]()[\\ 0-9a-fx-]*°/ ''; Set _l .; Change 'step2'# clean up the line (remove trailing spaces)/¥'step2'/ Change _l; Replace /¥(Å[Â ])¨1[ ]+°/ ¨1; Set _l .; Change 'step3';# clean up comment (remove trailing back slash and spaces)/¥'step3'/ Change _c; Replace /' \ '°/ ''; Replace /¥(Å[Â ])¨1[ ]+°/ ¨1; Set _c .; Change 'step4';#clean up the instructions (remove 0x and inner brackets)/¥'step4'/ Change _i; Replace /'] \ [0x'/ ' ' -c °; Replace /'[0x'/ '['; Set _i .; Change 'step5';# add tabs between comment and instructions/¥'step5'/ Change _c _s; Replace /¥(?Ç19È[ ])¨1[ ]*°/ ¨1; Replace /¥(?Ç19È?*[Â ] )¨1[ ]*°/ ¨1; Replace /¥Å[Â ]([ ]+)¨2°/ ¨2; Replace /    / "¶t" -c °; Replace /[ ]+/ "¶t"; Set _c . -a; Change 'step6';# add tabs between the line and comment/¥'step6'/ Change _l _s; Replace /¥(?Ç79È[ ])¨1[ ]*°/ ¨1; Replace /¥(?Ç79È?*[Â ] )¨1[ ]*°/ ¨1; Replace /¥Å[Â ]([ ]+)¨2°/ ¨2; Replace /    / "¶t" -c °; Replace /[ ]+/ "¶t"; Change _l . _c _i# restore slash definition/''/ Replace /''/ '\\' -c °# convert indent spaces to tabs/¥((    )+)¨1(Å)¨2/ Set indent ¨1; Set theLine ¨2; Change indent; Replace /    / "¶t" -c °; Change . theLine# remove trailing spaces and tabs/¥(Å[Â ¶t])¨1[ ¶t]+°/ Change ¨1/¥[ ¶t]+°/ Change ¨1